<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prague 2026</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f4f4f4;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            color: #333;
        }

        /* é ‚éƒ¨å°èˆªåˆ—åŒ…å«æ¨™é¡Œèˆ‡èªè¨€åˆ‡æ› */
        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 600px;
            margin-bottom: 10px;
        }

        h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 24px;
        }

        .lang-btn {
            background-color: #34495e;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
        }

        .subtitle {
            margin-bottom: 20px;
            color: #666;
        }

        .controls {
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 25px;
            background-color: #ddd;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        button.active {
            background-color: #d35400; /* å¸ƒæ‹‰æ ¼ç´…å±‹é ‚è‰² */
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        button:hover:not(.active) {
            background-color: #ccc;
        }

        .canvas-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            position: relative;
        }

        canvas {
            border: 1px solid #eee;
            border-radius: 10px;
            /* è®“æ»‘é¼ åœ¨ Canvas ä¸Šä¹Ÿèƒ½æœ‰æ­£ç¢ºçš„äº’å‹•æ„Ÿ */
            cursor: default;
        }

        .legend {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .legend span {
            display: flex;
            align-items: center;
        }
        .dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 5px;
            display: inline-block;
        }
    </style>
</head>
<body>

    <div class="header-row">
        <h1>ğŸ‡¨ğŸ‡¿ <span id="main-title">å¸ƒæ‹‰æ ¼ 4å¤©3å¤œ</span></h1>
        <button class="lang-btn" onclick="toggleLanguage()">EN / ä¸­æ–‡</button>
    </div>
    <p class="subtitle" id="sub-title">è¼•é¬†æ‹ç…§ãƒ»ç¶²ç´…æ‰“å¡ãƒ»ç´ é£Ÿå‹å–„</p>

    <div class="controls">
        <button onclick="loadDay(1)" id="btn1" class="active">Day 1</button>
        <button onclick="loadDay(2)" id="btn2">Day 2</button>
        <button onclick="loadDay(3)" id="btn3">Day 3</button>
        <button onclick="loadDay(4)" id="btn4">Day 4</button>
    </div>

    <div class="canvas-container">
        <canvas id="tripCanvas" width="600" height="750"></canvas>
    </div>

    <div class="legend">
        <span id="leg-sight"><span class="dot" style="background:#d35400"></span> æ™¯é» (Sight)</span>
        <span id="leg-food"><span class="dot" style="background:#27ae60"></span> é¤é£² (Food)</span>
        <span id="leg-transport"><span class="dot" style="background:#3498db"></span> äº¤é€š (Transport)</span>
    </div>

    <script>
        const canvas = document.getElementById('tripCanvas');
        const ctx = canvas.getContext('2d');
        let currentDay = 1;
        let currentLang = 'zh'; // 'zh' or 'en'
        
        // ç”¨ä¾†å„²å­˜æŒ‰éˆ•çš„é»æ“Šå€åŸŸï¼Œå¯¦ç¾Canvaså…§çš„é€£çµé»æ“Š
        let hitRegions = []; 

        // æ–‡æœ¬è³‡æº
        const uiText = {
            zh: {
                mainTitle: "å¸ƒæ‹‰æ ¼ 4å¤©3å¤œ",
                subTitle: "è¼•é¬†æ‹ç…§ãƒ»ç¶²ç´…æ‰“å¡ãƒ»ç´ é£Ÿå‹å–„",
                dayNames: ["Day 1: èˆŠåŸç«¥è©±", "Day 2: åŸå ¡ç¾æ™¯", "Day 3: æ²³å²¸æ¼«éŠ", "Day 4: æ‚ é–’è¿”ç¨‹"],
                legend: ["æ™¯é» (Sight)", "é¤é£² (Food)", "äº¤é€š (Transport)"],
                btnMap: "åœ°åœ–",
                btnRoute: "è·¯ç·š"
            },
            en: {
                mainTitle: "Prague 4 Days",
                subTitle: "Relaxing â€¢ Instagram Spots â€¢ Veg Friendly",
                dayNames: ["Day 1: Old Town", "Day 2: Castle View", "Day 3: River Walk", "Day 4: Departure"],
                legend: ["Sight", "Food", "Transport"],
                btnMap: "Map",
                btnRoute: "Route"
            }
        };

        // è¡Œç¨‹æ•¸æ“šçµæ§‹ (å¢åŠ å¤šèªè¨€èˆ‡ query)
        const itineraryData = {
            1: {
                title: { zh: "Day 1: èˆŠåŸå€çš„æµªæ¼«èˆ‡å¤œæ™¯", en: "Day 1: Romance of Old Town" },
                stops: [
                    { time: "14:00", title: {zh: "ç“¦èŒ¨æ‹‰å¤«å»£å ´", en: "Wenceslas Square"}, desc: {zh: "æŠµé”ã€æ„Ÿå—åŸå¸‚ç†±é¬§æ°›åœ", en: "Arrival, feel the city vibe"}, type: "sight", query: "Wenceslas Square Prague" },
                    { time: "15:00", title: {zh: "ç«è—¥å¡” & å¸‚æ°‘æœƒé¤¨", en: "Powder Tower"}, desc: {zh: "åœ°æ¨™æ‰“å¡ï¼Œæ¬£è³æ–°è—è¡“é¢¨æ ¼", en: "Landmark photo spot, Art Nouveau"}, type: "sight", query: "Powder Tower Prague" },
                    { time: "16:00", title: {zh: "èˆŠåŸå»£å ´ & ç…™å›ªæ²", en: "Old Town Square"}, desc: {zh: "å¿…åƒ TrdelnÃ­k ç”œé»ï¼Œçœ‹å¤©æ–‡é˜", en: "Try TrdelnÃ­k, see Astronomical Clock"}, type: "sight", query: "Old Town Square Prague" },
                    { time: "18:00", title: {zh: "æŸ¥ç†å¤§æ©‹ (æ—¥è½)", en: "Charles Bridge (Sunset)"}, desc: {zh: "è§¸æ‘¸é›•åƒè¨±é¡˜ï¼Œçµ•ç¾æ²³æ™¯", en: "Touch statues for luck, river view"}, type: "sight", query: "Charles Bridge Prague" },
                    { time: "19:30", title: {zh: "æ™šé¤: Maitrea", en: "Dinner: Maitrea"}, desc: {zh: "ç¦ªæ„é¢¨æ ¼ç´ é£Ÿï¼Œç¾å‘³æ·å…‹èœæ”¹è‰¯", en: "Zen style vegetarian, Czech fusion"}, type: "food", query: "Maitrea restaurace Prague" }
                ]
            },
            2: {
                title: { zh: "Day 2: åŸå ¡å€èˆ‡æ–‡é’ç‰†", en: "Day 2: Castle & Lennon Wall" },
                stops: [
                    { time: "10:00", title: {zh: "ä½©ç‰¹ä»»å±±çºœè»Š", en: "PetÅ™Ã­n Funicular"}, desc: {zh: "æ­çºœè»Šä¸Šå±±ï¼Œçœºæœ›ç´…å±‹é ‚å…¨æ™¯", en: "Ride up for panoramic roof views"}, type: "transport", query: "Petrin Funicular Prague" },
                    { time: "12:30", title: {zh: "åˆé¤: Vegan's Prague", en: "Lunch: Vegan's Prague"}, desc: {zh: "åŸå ¡è…³ä¸‹çš„æ™¯è§€ç´ é£Ÿæ¼¢å ¡", en: "Vegan burgers with castle view"}, type: "food", query: "Vegan's Prague" },
                    { time: "14:00", title: {zh: "å¸ƒæ‹‰æ ¼åŸå ¡ (å¤–éƒ¨)", en: "Prague Castle"}, desc: {zh: "è–ç¶­ç‰¹å¤§æ•™å ‚åˆå½±", en: "St. Vitus Cathedral photo op"}, type: "sight", query: "Prague Castle" },
                    { time: "16:00", title: {zh: "å°åŸå€æ¼«æ­¥", en: "Lesser Town Stroll"}, desc: {zh: "æ²¿é€”ä¸‹å¡ï¼Œé€›å¯æ„›å°åº—", en: "Walk downhill, cute shops"}, type: "transport", query: "MalÃ¡ Strana Prague" },
                    { time: "17:30", title: {zh: "åˆ—å„‚ç‰†", en: "Lennon Wall"}, desc: {zh: "å¡—é´‰ç‰†æ‹ç…§ï¼Œå¹´è¼•äººæœ€æ„›", en: "Graffiti wall, peace symbol"}, type: "sight", query: "Lennon Wall Prague" },
                    { time: "19:00", title: {zh: "æ™šé¤: LehkÃ¡ Hlava", en: "Dinner: LehkÃ¡ Hlava"}, desc: {zh: "æ˜Ÿç©ºå¤©èŠ±æ¿ç´ é£Ÿé¤å»³", en: "Clear Head vegetarian restaurant"}, type: "food", query: "LehkÃ¡ Hlava Prague" }
                ]
            },
            3: {
                title: { zh: "Day 3: ä¼çˆ¾å¡”ç“¦æ²³èˆ‡ç¾ä»£è—è¡“", en: "Day 3: Vltava River & Art" },
                stops: [
                    { time: "10:30", title: {zh: "è·³èˆçš„æˆ¿å­", en: "Dancing House"}, desc: {zh: "ç¨ç‰¹æ‰­æ›²å»ºç¯‰ï¼Œç¶²ç´…æ‰“å¡é»", en: "Unique architecture photo spot"}, type: "sight", query: "Dancing House Prague" },
                    { time: "13:00", title: {zh: "åˆé¤: æ²³å²¸å¸‚é›†", en: "Lunch: River Market"}, desc: {zh: "äº«å—æ²³é‚Šè¼•é¬†æ°›åœ", en: "Relaxing riverside vibes"}, type: "food", query: "Naplavka Farmers Market" },
                    { time: "14:30", title: {zh: "ç§Ÿå€Ÿè…³è¸èˆ¹", en: "Pedal Boat Rental"}, desc: {zh: "å¾æ²³é¢ä¸Šçœ‹æŸ¥ç†å¤§æ©‹ï¼Œè¶…Chill", en: "View bridge from the river"}, type: "activity", query: "Slovansky Island Boat Rental" },
                    { time: "16:30", title: {zh: "Na PÅ™Ã­kopÄ› è³¼ç‰©è¡—", en: "Na PÅ™Ã­kopÄ› Shopping"}, desc: {zh: "é€›è¡—è³¼ç‰©ï¼Œè²·ç´€å¿µå“", en: "Shopping and souvenirs"}, type: "activity", query: "Na Prikope Prague" },
                    { time: "19:00", title: {zh: "æ™šé¤: EtnosvÄ›t", en: "Dinner: EtnosvÄ›t"}, desc: {zh: "ç²¾ç·»åœ‹éš›ç´ é£Ÿæ–™ç†", en: "International veg cuisine"}, type: "food", query: "Etnosvet Prague" },
                    { time: "21:00", title: {zh: "é…’å§: Hemingway", en: "Bar: Hemingway"}, desc: {zh: "äº«å—å¸ƒæ‹‰æ ¼å¤œç”Ÿæ´»", en: "Enjoy Prague nightlife"}, type: "activity", query: "Hemingway Bar Prague" }
                ]
            },
            4: {
                title: { zh: "Day 4: æ—©åˆé¤èˆ‡å‘Šåˆ¥", en: "Day 4: Brunch & Farewell" },
                stops: [
                    { time: "10:00", title: {zh: "æ—©åˆé¤: CafÃ© Savoy", en: "Brunch: CafÃ© Savoy"}, desc: {zh: "è¯éº—æ­å¼æ—©é¤é«”é©—", en: "Fancy European breakfast"}, type: "food", query: "Cafe Savoy Prague" },
                    { time: "11:30", title: {zh: "å“ˆç¶­çˆ¾å¸‚é›†", en: "Havel's Market"}, desc: {zh: "è²·æ–°é®®æ°´æœèˆ‡æœ€å¾Œç´€å¿µå“", en: "Fresh fruit and souvenirs"}, type: "sight", query: "Havelske trziste Prague" },
                    { time: "13:00", title: {zh: "å‰å¾€æ©Ÿå ´", en: "To Airport"}, desc: {zh: "æ­ä¹˜ Uber/Bolt æº–å‚™è¿”ç¨‹", en: "Take Uber/Bolt to airport"}, type: "transport", query: "Vaclav Havel Airport Prague" }
                ]
            }
        };

        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            updateStaticText();
            loadDay(currentDay);
        }

        function updateStaticText() {
            const t = uiText[currentLang];
            document.getElementById('main-title').innerText = t.mainTitle;
            document.getElementById('sub-title').innerText = t.subTitle;
            document.getElementById('btn1').innerText = t.dayNames[0].split(':')[0]; // Just Day X
            
            // Update Legend
            document.getElementById('leg-sight').innerHTML = `<span class="dot" style="background:#d35400"></span> ${t.legend[0]}`;
            document.getElementById('leg-food').innerHTML = `<span class="dot" style="background:#27ae60"></span> ${t.legend[1]}`;
            document.getElementById('leg-transport').innerHTML = `<span class="dot" style="background:#3498db"></span> ${t.legend[2]}`;
        }

        function drawItinerary(day) {
            // æ¸…ç©ºç•«å¸ƒ èˆ‡ é»æ“Šå€åŸŸ
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            hitRegions = [];
            
            const data = itineraryData[day];
            const stops = data.stops;
            
            // ç¹ªè£½èƒŒæ™¯è£é£¾
            ctx.strokeStyle = '#f8f8f8';
            ctx.lineWidth = 1;
            for(let i=0; i<canvas.width; i+=20) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, canvas.height);
                ctx.stroke();
            }

            // ç¹ªè£½æ¨™é¡Œ
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 22px Helvetica';
            ctx.textAlign = 'left';
            ctx.fillText(data.title[currentLang], 30, 40);
            
            // ç¹ªè£½è·¯ç·š (é€£æ¥ç·š)
            ctx.beginPath();
            ctx.moveTo(100, 80);
            ctx.lineTo(100, 80 + (stops.length - 1) * 110);
            ctx.strokeStyle = '#bdc3c7';
            ctx.lineWidth = 4;
            ctx.setLineDash([10, 5]); // è™›ç·šæ•ˆæœ
            ctx.stroke();
            ctx.setLineDash([]); // é‡ç½®ç‚ºå¯¦ç·š

            // å¾ªç’°ç¹ªè£½æ¯å€‹é»
            stops.forEach((stop, index) => {
                const y = 80 + index * 110;
                const x = 100;

                // 1. ç¹ªè£½ç¯€é»åœ“åœˆ
                ctx.beginPath();
                ctx.arc(x, y, 15, 0, 2 * Math.PI);
                
                // æ ¹æ“šé¡å‹æ±ºå®šé¡è‰²
                let color = '#d35400'; // Sight
                if (stop.type === 'food') color = '#27ae60'; // Food
                if (stop.type === 'transport' || stop.type === 'activity') color = '#3498db'; // Transport
                
                ctx.fillStyle = color;
                ctx.fill();
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 3;
                ctx.stroke();

                // 2. ç¹ªè£½æ™‚é–“ (å·¦å´)
                ctx.fillStyle = '#7f8c8d';
                ctx.font = 'bold 16px Arial';
                ctx.textAlign = 'right';
                ctx.fillText(stop.time, x - 30, y + 5);

                // 3. ç¹ªè£½å…§å®¹å¡ç‰‡ (å³å´)
                const cardX = x + 35;
                const cardY = y - 40;
                const cardW = 440;
                const cardH = 80;

                // å¡ç‰‡é™°å½±
                ctx.shadowColor = 'rgba(0,0,0,0.1)';
                ctx.shadowBlur = 10;
                ctx.shadowOffsetX = 2;
                ctx.shadowOffsetY = 2;

                // å¡ç‰‡èƒŒæ™¯
                ctx.fillStyle = 'white';
                ctx.fillRect(cardX, cardY, cardW, cardH);
                
                // å·¦å´è‰²å½©æ¢
                ctx.fillStyle = color;
                ctx.fillRect(cardX, cardY, 5, cardH);

                ctx.shadowColor = 'transparent'; // Reset shadow

                // 4. æ–‡å­—å…§å®¹
                ctx.textAlign = 'left';
                
                // æ¨™é¡Œ
                ctx.fillStyle = '#2c3e50';
                ctx.font = 'bold 18px Arial';
                ctx.fillText(stop.title[currentLang], cardX + 20, cardY + 25);
                
                // æè¿°
                ctx.fillStyle = '#7f8c8d';
                ctx.font = '13px Arial';
                ctx.fillText(stop.desc[currentLang], cardX + 20, cardY + 50);

                // 5. ç¹ªè£½äº’å‹•æŒ‰éˆ• (Canvaså…§ç¹ªè£½æŒ‰éˆ•)
                const btnW = 60;
                const btnH = 24;
                const btnY = cardY + 45;
                
                // æŒ‰éˆ• 1: åœ°åœ– (Map)
                const btnMapX = cardX + cardW - 140;
                drawButton(ctx, btnMapX, btnY, btnW, btnH, uiText[currentLang].btnMap, '#ecf0f1', '#2c3e50');
                
                // è¨»å†Šé»æ“Šå€åŸŸ
                hitRegions.push({
                    x: btnMapX, y: btnY, w: btnW, h: btnH,
                    type: 'link',
                    url: `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(stop.query)}`
                });

                // æŒ‰éˆ• 2: è·¯ç·š (Route)
                const btnRouteX = cardX + cardW - 70;
                drawButton(ctx, btnRouteX, btnY, btnW, btnH, uiText[currentLang].btnRoute, '#3498db', 'white');

                // è¨»å†Šé»æ“Šå€åŸŸ
                hitRegions.push({
                    x: btnRouteX, y: btnY, w: btnW, h: btnH,
                    type: 'link',
                    url: `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(stop.query)}`
                });
                
                // åœ–ç¤º (ç°¡å–® Emoji)
                let icon = 'ğŸ“¸';
                if (stop.type === 'food') icon = 'ğŸ¥—';
                if (stop.type === 'transport') icon = 'ğŸšƒ';
                if (stop.type === 'activity') icon = 'ğŸš²';
                
                ctx.font = '20px Arial';
                ctx.fillStyle = '#333';
                ctx.fillText(icon, cardX + cardW - 40, cardY + 25);
            });
        }

        // è¼”åŠ©å‡½æ•¸ï¼šåœ¨Canvasä¸Šç•«æŒ‰éˆ•
        function drawButton(ctx, x, y, w, h, text, bgColor, textColor) {
            ctx.fillStyle = bgColor;
            // åœ“è§’çŸ©å½¢ç°¡å–®æ¨¡æ“¬
            ctx.fillRect(x, y, w, h);
            
            ctx.fillStyle = textColor;
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(text, x + w/2, y + h/2 + 4);
        }

        function loadDay(day) {
            currentDay = day;
            
            // æ›´æ–°æŒ‰éˆ•æ¨£å¼
            for(let i=1; i<=4; i++) {
                document.getElementById('btn'+i).classList.remove('active');
            }
            document.getElementById('btn'+day).classList.add('active');

            // åŸ·è¡Œå‹•ç•«ç¹ªè£½
            drawItinerary(day);
        }

        // ç›£è½ Canvas é»æ“Šäº‹ä»¶
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            // æª¢æŸ¥æ˜¯å¦é»æ“Šåˆ°ä»»ä½•æŒ‰éˆ•å€åŸŸ
            hitRegions.forEach(region => {
                if (mouseX >= region.x && mouseX <= region.x + region.w &&
                    mouseY >= region.y && mouseY <= region.y + region.h) {
                    
                    if (region.type === 'link') {
                        window.open(region.url, '_blank');
                    }
                }
            });
        });

        // ç›£è½æ»‘é¼ ç§»å‹•ï¼Œæ”¹è®Šæ¸¸æ¨™æ¨£å¼
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const mouseY = e.clientY - rect.top;

            let isHovering = false;
            hitRegions.forEach(region => {
                if (mouseX >= region.x && mouseX <= region.x + region.w &&
                    mouseY >= region.y && mouseY <= region.y + region.h) {
                    isHovering = true;
                }
            });

            canvas.style.cursor = isHovering ? 'pointer' : 'default';
        });

        // åˆå§‹åŠ è¼‰
        loadDay(1);

    </script>
</body>
</html>
